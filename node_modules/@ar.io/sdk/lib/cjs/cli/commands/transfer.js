"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.transfer = void 0;
const utils_js_1 = require("../utils.js");
async function transfer(options) {
    const { target, arioQuantity } = (0, utils_js_1.requiredTargetAndQuantityFromOptions)(options);
    const { ario, signerAddress } = (0, utils_js_1.writeARIOFromOptions)(options);
    if (!options.skipConfirmation) {
        await (0, utils_js_1.assertEnoughBalance)(ario, signerAddress, arioQuantity);
        const confirm = await (0, utils_js_1.confirmationPrompt)(`Are you sure you want to transfer ${(0, utils_js_1.formatARIOWithCommas)(arioQuantity)} ARIO to ${target}?`);
        if (!confirm) {
            return { message: 'Transfer aborted by user' };
        }
    }
    const result = await ario.transfer({
        target,
        qty: arioQuantity.toMARIO().valueOf(),
    }, (0, utils_js_1.writeActionTagsFromOptions)(options));
    const output = {
        senderAddress: signerAddress,
        transferResult: result,
        message: `Successfully transferred ${(0, utils_js_1.formatARIOWithCommas)(arioQuantity)} ARIO to ${target}`,
    };
    return output;
}
exports.transfer = transfer;
